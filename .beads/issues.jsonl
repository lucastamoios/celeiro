{"id":"celeiro-1","title":"Add Financial Management System","description":"Implement complete financial management layer on top of existing auth scaffold.\n\n## Why\nCeleiro currently has authentication and user management but lacks the core financial management capabilities that define its purpose. Users need to import bank transactions, classify spending, and track budgets.\n\n## What Changes\n- Database schema for accounts, transactions, categories, budgets (migrations 00003-00007)\n- OFX parser for transaction import (1.x and 2.x support)\n- Domain models for all financial entities\n- Repository layer with organization scoping\n- Service layer for business logic\n- HTTP handlers for REST API\n- Comprehensive test coverage (\u003e80%)\n\n## Reference\n- Proposal: openspec/changes/add-financial-management/proposal.md\n- Design: openspec/changes/add-financial-management/design.md\n- Tasks: openspec/changes/add-financial-management/tasks.md\n- Specs: openspec/changes/add-financial-management/specs/","acceptance_criteria":"All migrations run successfully, OFX parser handles both formats, FITID deduplication works, classification rules execute in priority order, budget calculations work for all three types, organization isolation enforced, all endpoints protected by auth, \u003e80% test coverage","status":"open","priority":1,"issue_type":"epic","created_at":"2025-10-28T15:31:40.420818-03:00","updated_at":"2025-10-28T15:31:40.420818-03:00","labels":["openspec:add-financial-management","size:xl","type:feature"]}
{"id":"celeiro-10","title":"Migration 00004: Accounts Table","description":"Create accounts table with dual FK (user_id + organization_id). Composite FK to user_organizations enforces user belongs to org. Check constraint for account_type","acceptance_criteria":"Table created, FKs enforced, indexes on user_id and organization_id","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:40:37.818276-03:00","updated_at":"2025-10-28T15:40:37.818276-03:00","labels":["db-migration","p0","phase:1"],"dependencies":[{"issue_id":"celeiro-10","depends_on_id":"celeiro-9","type":"blocks","created_at":"2025-10-28T15:40:37.819728-03:00","created_by":"daemon"}]}
{"id":"celeiro-11","title":"Migration 00005: Transactions Table","description":"Create transactions table with unique index on (account_id, ofx_fitid) for deduplication. JSONB column for raw_ofx_data. Partial index for unclassified transactions","acceptance_criteria":"Table created, unique constraint prevents FITID duplicates, indexes optimize queries","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:40:37.845566-03:00","updated_at":"2025-10-28T15:40:37.845566-03:00","labels":["db-migration","p0","phase:1"],"dependencies":[{"issue_id":"celeiro-11","depends_on_id":"celeiro-10","type":"blocks","created_at":"2025-10-28T15:40:37.846582-03:00","created_by":"daemon"}]}
{"id":"celeiro-12","title":"Migration 00006: Budgets and Budget Items","description":"Create budgets and budget_items tables. Check constraints for month (1-12) and year. Indexes on user_id, category_id, month, year","acceptance_criteria":"Tables created, constraints enforced, CASCADE from budgets to budget_items works","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:40:37.872052-03:00","updated_at":"2025-10-28T15:40:37.872052-03:00","labels":["db-migration","p0","phase:1"],"dependencies":[{"issue_id":"celeiro-12","depends_on_id":"celeiro-9","type":"blocks","created_at":"2025-10-28T15:40:37.873297-03:00","created_by":"daemon"}]}
{"id":"celeiro-13","title":"Migration 00007: Classification Rules","description":"Create classification_rules table. Indexes on user_id, priority, is_active. Check constraints for rule_type enum","acceptance_criteria":"Table created, indexes optimize rule matching by priority, constraints enforce valid types","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:40:37.901353-03:00","updated_at":"2025-10-28T15:40:37.901353-03:00","labels":["db-migration","p0","phase:1"],"dependencies":[{"issue_id":"celeiro-13","depends_on_id":"celeiro-9","type":"blocks","created_at":"2025-10-28T15:40:37.902431-03:00","created_by":"daemon"}]}
{"id":"celeiro-14","title":"Implement OFX Parser Package","description":"Create backend/pkg/ofx/ with Parser interface. Auto-detect OFX 1.x (SGML) vs 2.x (XML). Implement parsers for both formats. Extract transaction data: FITID, DTPOSTED, TRNAMT, NAME/MEMO, TRNTYPE. Graceful error handling for malformed files","acceptance_criteria":"Parser handles both OFX formats, auto-detects version, extracts all fields, handles encoding (UTF-8, accents)","status":"open","priority":0,"issue_type":"feature","created_at":"2025-10-28T15:40:51.817126-03:00","updated_at":"2025-10-28T15:40:51.817126-03:00","labels":["p0","parser","phase:2"]}
{"id":"celeiro-15","title":"Write OFX Parser Tests","description":"Unit tests for format detection, OFX 1.x parsing, OFX 2.x parsing, error cases. Create testdata/ofx/ with: checking_account.ofx, credit_card.ofx, malformed.ofx, duplicate_fitid.ofx","acceptance_criteria":"\u003e90% coverage for parser package, all edge cases tested, sample OFX files committed","status":"open","priority":0,"issue_type":"chore","created_at":"2025-10-28T15:40:51.843556-03:00","updated_at":"2025-10-28T15:40:51.843556-03:00","labels":["p0","phase:2","testing"],"dependencies":[{"issue_id":"celeiro-15","depends_on_id":"celeiro-14","type":"blocks","created_at":"2025-10-28T15:40:51.844594-03:00","created_by":"daemon"}]}
{"id":"celeiro-16","title":"Create Financial Domain Models","description":"Create backend/internal/application/financial/ with models: Account, Transaction, Category, Budget, BudgetItem, ClassificationRule. Use serial IDs throughout. Add validation methods (account type enum, budget type enum, month 1-12, amounts)","acceptance_criteria":"All models defined with correct types, validation logic works, follows Go naming conventions","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:40:51.869248-03:00","updated_at":"2025-10-28T15:40:51.869248-03:00","labels":["domain-model","p1","phase:3"],"dependencies":[{"issue_id":"celeiro-16","depends_on_id":"celeiro-9","type":"blocks","created_at":"2025-10-28T15:40:51.870237-03:00","created_by":"daemon"},{"issue_id":"celeiro-16","depends_on_id":"celeiro-10","type":"blocks","created_at":"2025-10-28T15:40:51.870554-03:00","created_by":"daemon"},{"issue_id":"celeiro-16","depends_on_id":"celeiro-11","type":"blocks","created_at":"2025-10-28T15:40:51.870838-03:00","created_by":"daemon"},{"issue_id":"celeiro-16","depends_on_id":"celeiro-12","type":"blocks","created_at":"2025-10-28T15:40:51.871107-03:00","created_by":"daemon"},{"issue_id":"celeiro-16","depends_on_id":"celeiro-13","type":"blocks","created_at":"2025-10-28T15:40:51.871427-03:00","created_by":"daemon"}]}
{"id":"celeiro-17","title":"Implement AccountRepository","description":"CRUD for accounts: Create, GetByID, ListByUser, ListByOrganization, Update, Delete (CASCADE). ONLY touches accounts table - no JOINs to other domains","acceptance_criteria":"All methods implemented with SQLX, organization scoping enforced, unit tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:06.06423-03:00","updated_at":"2025-10-28T15:41:06.06423-03:00","labels":["p1","phase:4","repository"],"dependencies":[{"issue_id":"celeiro-17","depends_on_id":"celeiro-16","type":"blocks","created_at":"2025-10-28T15:41:06.065552-03:00","created_by":"daemon"}]}
{"id":"celeiro-18","title":"Implement TransactionRepository","description":"BulkInsert with ON CONFLICT (account_id, ofx_fitid) DO NOTHING. GetByID, ListByAccount (paginated), ListByDateRange, GetMonthlySummary (aggregate), GetByCategory, Update, Delete. ONLY touches transactions table","acceptance_criteria":"FITID deduplication works, bulk insert handles 1000+ rows, pagination works, tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:06.090479-03:00","updated_at":"2025-10-28T15:41:06.090479-03:00","labels":["p1","phase:4","repository"],"dependencies":[{"issue_id":"celeiro-18","depends_on_id":"celeiro-16","type":"blocks","created_at":"2025-10-28T15:41:06.091677-03:00","created_by":"daemon"}]}
{"id":"celeiro-19","title":"Implement CategoryRepository","description":"Create, GetByID, ListByUser (returns system + user categories), ListSystem, Update, Delete (prevent if is_system=true). ONLY touches categories table","acceptance_criteria":"System category protection works, user isolation enforced, tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:06.116032-03:00","updated_at":"2025-10-28T15:41:06.116032-03:00","labels":["p1","phase:4","repository"],"dependencies":[{"issue_id":"celeiro-19","depends_on_id":"celeiro-16","type":"blocks","created_at":"2025-10-28T15:41:06.117114-03:00","created_by":"daemon"}]}
{"id":"celeiro-2","title":"Migration 00003: Categories Table","description":"Create categories table with serial ID, seed 7 system categories (Alimentação, Transporte, Moradia, Saúde, Educação, Lazer, Outros)","design":"See openspec/changes/add-financial-management/design.md - Decision 6","acceptance_criteria":"Table created, system categories seeded, indexes on user_id and is_system","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:14.960182-03:00","updated_at":"2025-10-28T15:33:14.960182-03:00","labels":["db-migration","p0","phase:1"]}
{"id":"celeiro-20","title":"Implement BudgetRepository","description":"Create, CreateItem, GetByID with items (JOIN budget_items - acceptable as same domain), ListByMonth, ListByCategory, Update, UpdateItem, Delete (CASCADE to items), DeleteItem","acceptance_criteria":"Parent-child JOIN works, CASCADE verified, all methods tested","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:06.141358-03:00","updated_at":"2025-10-28T15:41:06.141358-03:00","labels":["p1","phase:4","repository"],"dependencies":[{"issue_id":"celeiro-20","depends_on_id":"celeiro-16","type":"blocks","created_at":"2025-10-28T15:41:06.142356-03:00","created_by":"daemon"}]}
{"id":"celeiro-21","title":"Implement ClassificationRuleRepository","description":"Create, GetByID, ListByUser (ORDER BY priority ASC, created_at ASC), Update, Delete. ONLY touches classification_rules table","acceptance_criteria":"Priority ordering correct, all CRUD operations work, tests pass","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:06.166851-03:00","updated_at":"2025-10-28T15:41:06.166851-03:00","labels":["p1","phase:4","repository"],"dependencies":[{"issue_id":"celeiro-21","depends_on_id":"celeiro-16","type":"blocks","created_at":"2025-10-28T15:41:06.170153-03:00","created_by":"daemon"}]}
{"id":"celeiro-22","title":"Implement AccountService","description":"CreateAccount (validate user+org), GetAccount (validate ownership), ListAccounts, UpdateAccount (validate ownership), DeleteAccount (validate ownership, CASCADE transactions). Uses AccountRepository","acceptance_criteria":"Ownership validation enforced, business logic correct, tests with mock repository","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-28T15:41:20.023305-03:00","updated_at":"2025-10-28T15:41:20.023305-03:00","labels":["p1","phase:5","service"],"dependencies":[{"issue_id":"celeiro-22","depends_on_id":"celeiro-17","type":"blocks","created_at":"2025-10-28T15:41:20.025856-03:00","created_by":"daemon"}]}
{"id":"celeiro-23","title":"Implement TransactionService","description":"ImportFromOFX (parse file, bulk insert, return stats), GetTransaction (validate access), ListTransactions (validate + filters), GetMonthlySummary, ClassifyTransaction (manual), AutoClassifyTransactions (apply rules). Uses TransactionRepository + OFXParser","acceptance_criteria":"End-to-end OFX import works, deduplication stats accurate, classification logic correct","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-28T15:41:20.050256-03:00","updated_at":"2025-10-28T15:41:20.050256-03:00","labels":["p1","phase:5","service"],"dependencies":[{"issue_id":"celeiro-23","depends_on_id":"celeiro-18","type":"blocks","created_at":"2025-10-28T15:41:20.052627-03:00","created_by":"daemon"},{"issue_id":"celeiro-23","depends_on_id":"celeiro-14","type":"blocks","created_at":"2025-10-28T15:41:20.053404-03:00","created_by":"daemon"}]}
{"id":"celeiro-24","title":"Implement CategoryService","description":"CreateCategory (user categories only), GetCategory, ListCategories (system + user), UpdateCategory (prevent system edits), DeleteCategory (prevent system deletion). Uses CategoryRepository","acceptance_criteria":"System category protection enforced at service layer, user isolation works","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:20.077588-03:00","updated_at":"2025-10-28T15:41:20.077588-03:00","labels":["p1","phase:5","service"],"dependencies":[{"issue_id":"celeiro-24","depends_on_id":"celeiro-19","type":"blocks","created_at":"2025-10-28T15:41:20.080117-03:00","created_by":"daemon"}]}
{"id":"celeiro-25","title":"Implement BudgetService","description":"CreateBudget, AddBudgetItem, GetBudget (calc amount), ListBudgets, GetBudgetStatus (spent vs budgeted), CalculateFinalAmount (fixed/calculated/hybrid), UpdateBudget, DeleteBudget. Uses BudgetRepository + TransactionService","acceptance_criteria":"All 3 budget types calculate correctly: fixed returns amount, calculated returns sum(items), hybrid returns max(amount, sum(items))","status":"open","priority":1,"issue_type":"feature","created_at":"2025-10-28T15:41:20.105938-03:00","updated_at":"2025-10-28T15:41:20.105938-03:00","labels":["p1","phase:5","service"],"dependencies":[{"issue_id":"celeiro-25","depends_on_id":"celeiro-20","type":"blocks","created_at":"2025-10-28T15:41:20.108222-03:00","created_by":"daemon"},{"issue_id":"celeiro-25","depends_on_id":"celeiro-23","type":"blocks","created_at":"2025-10-28T15:41:20.108978-03:00","created_by":"daemon"}]}
{"id":"celeiro-26","title":"Implement ClassificationRuleService","description":"CreateRule, GetRule, ListRules (by priority), ApplyRules (first match wins logic), UpdateRule, DeleteRule. Uses ClassificationRuleRepository","acceptance_criteria":"First match wins, priority ordering works, pattern matching correct (description LIKE, amount range)","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:20.134401-03:00","updated_at":"2025-10-28T15:41:20.134401-03:00","labels":["p1","phase:5","service"],"dependencies":[{"issue_id":"celeiro-26","depends_on_id":"celeiro-21","type":"blocks","created_at":"2025-10-28T15:41:20.137823-03:00","created_by":"daemon"}]}
{"id":"celeiro-27","title":"Implement AccountHandlers","description":"POST /api/v1/accounts, GET /api/v1/accounts, GET /api/v1/accounts/:id, PUT /api/v1/accounts/:id, DELETE /api/v1/accounts/:id. Add auth middleware, request validation, error handling (401/403/404/500)","acceptance_criteria":"All endpoints work, auth enforced, proper HTTP status codes, input validation","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.710279-03:00","updated_at":"2025-10-28T15:41:34.710279-03:00","labels":["api","handler","p1","phase:6"],"dependencies":[{"issue_id":"celeiro-27","depends_on_id":"celeiro-22","type":"blocks","created_at":"2025-10-28T15:41:34.712984-03:00","created_by":"daemon"}]}
{"id":"celeiro-28","title":"Implement TransactionHandlers","description":"POST /api/v1/transactions/import (multipart file upload), GET /api/v1/transactions (paginated, filterable), GET /api/v1/transactions/:id, PUT /api/v1/transactions/:id/classify, POST /api/v1/transactions/auto-classify, GET /api/v1/transactions/summary (monthly)","acceptance_criteria":"OFX upload handles multipart/form-data, pagination works, filtering works, auth enforced","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.738787-03:00","updated_at":"2025-10-28T15:41:34.738787-03:00","labels":["api","handler","p1","phase:6"],"dependencies":[{"issue_id":"celeiro-28","depends_on_id":"celeiro-23","type":"blocks","created_at":"2025-10-28T15:41:34.741671-03:00","created_by":"daemon"}]}
{"id":"celeiro-29","title":"Implement CategoryHandlers","description":"POST /api/v1/categories, GET /api/v1/categories, GET /api/v1/categories/:id, PUT /api/v1/categories/:id, DELETE /api/v1/categories/:id. Auth middleware, validation","acceptance_criteria":"All endpoints work, system category protection enforced via service layer","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.766219-03:00","updated_at":"2025-10-28T15:41:34.766219-03:00","labels":["api","handler","p1","phase:6"],"dependencies":[{"issue_id":"celeiro-29","depends_on_id":"celeiro-24","type":"blocks","created_at":"2025-10-28T15:41:34.770453-03:00","created_by":"daemon"}]}
{"id":"celeiro-3","title":"Migration 00004: Accounts Table","description":"Create accounts table with dual FK (user_id, organization_id), composite FK to user_organizations, check constraint for account_type","design":"See openspec/changes/add-financial-management/design.md - Decision 2","acceptance_criteria":"Table created, FKs enforced, indexes on user_id and organization_id","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:14.986878-03:00","updated_at":"2025-10-28T15:33:14.986878-03:00","labels":["db-migration","p0","phase:1"]}
{"id":"celeiro-30","title":"Implement BudgetHandlers","description":"POST /api/v1/budgets, POST /api/v1/budgets/:id/items, GET /api/v1/budgets (filter by month/year), GET /api/v1/budgets/:id, GET /api/v1/budgets/:id/status, PUT /api/v1/budgets/:id, DELETE /api/v1/budgets/:id","acceptance_criteria":"All endpoints work, budget status returns spent vs budgeted correctly","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.79674-03:00","updated_at":"2025-10-28T15:41:34.79674-03:00","labels":["api","handler","p1","phase:6"],"dependencies":[{"issue_id":"celeiro-30","depends_on_id":"celeiro-25","type":"blocks","created_at":"2025-10-28T15:41:34.799358-03:00","created_by":"daemon"}]}
{"id":"celeiro-31","title":"Implement ClassificationRuleHandlers","description":"POST /api/v1/classification-rules, GET /api/v1/classification-rules (ordered by priority), GET /api/v1/classification-rules/:id, PUT /api/v1/classification-rules/:id, DELETE /api/v1/classification-rules/:id","acceptance_criteria":"All endpoints work, rules returned in priority order ASC","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.824299-03:00","updated_at":"2025-10-28T15:41:34.824299-03:00","labels":["api","handler","p1","phase:6"],"dependencies":[{"issue_id":"celeiro-31","depends_on_id":"celeiro-26","type":"blocks","created_at":"2025-10-28T15:41:34.826531-03:00","created_by":"daemon"}]}
{"id":"celeiro-32","title":"Register Financial Routes in Chi Router","description":"Add all financial routes to Chi router. Apply auth middleware to ALL financial endpoints. Configure CORS for financial routes","acceptance_criteria":"All routes registered, auth middleware applied, CORS works, routes testable via curl/Postman","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:41:34.851471-03:00","updated_at":"2025-10-28T15:41:34.851471-03:00","labels":["api","p1","phase:6","routing"],"dependencies":[{"issue_id":"celeiro-32","depends_on_id":"celeiro-27","type":"blocks","created_at":"2025-10-28T15:41:34.855418-03:00","created_by":"daemon"},{"issue_id":"celeiro-32","depends_on_id":"celeiro-28","type":"blocks","created_at":"2025-10-28T15:41:34.856126-03:00","created_by":"daemon"},{"issue_id":"celeiro-32","depends_on_id":"celeiro-29","type":"blocks","created_at":"2025-10-28T15:41:34.85681-03:00","created_by":"daemon"},{"issue_id":"celeiro-32","depends_on_id":"celeiro-30","type":"blocks","created_at":"2025-10-28T15:41:34.857394-03:00","created_by":"daemon"},{"issue_id":"celeiro-32","depends_on_id":"celeiro-31","type":"blocks","created_at":"2025-10-28T15:41:34.858101-03:00","created_by":"daemon"}]}
{"id":"celeiro-33","title":"Write End-to-End Integration Tests","description":"E2E tests: Full OFX import flow (upload -\u003e parse -\u003e store -\u003e deduplicate), transaction classification flow (manual + auto), budget creation and tracking, organization isolation verification. Use testcontainers for PostgreSQL. Use sample OFX files from testdata/","acceptance_criteria":"All critical paths covered, testcontainers setup works, \u003e80% overall coverage achieved","status":"open","priority":1,"issue_type":"chore","created_at":"2025-10-28T15:41:48.642536-03:00","updated_at":"2025-10-28T15:41:48.642536-03:00","labels":["integration","p1","phase:7","testing"],"dependencies":[{"issue_id":"celeiro-33","depends_on_id":"celeiro-32","type":"blocks","created_at":"2025-10-28T15:41:48.645764-03:00","created_by":"daemon"}]}
{"id":"celeiro-34","title":"Write API Integration Tests","description":"Integration tests for all financial endpoints with auth. Test error cases (401, 403, 404, 500). Test pagination, filtering, sorting. Verify request/response contracts","acceptance_criteria":"All endpoints tested with real HTTP requests, error handling verified, edge cases covered","status":"open","priority":1,"issue_type":"chore","created_at":"2025-10-28T15:41:48.670881-03:00","updated_at":"2025-10-28T15:41:48.670881-03:00","labels":["api","p1","phase:7","testing"],"dependencies":[{"issue_id":"celeiro-34","depends_on_id":"celeiro-32","type":"blocks","created_at":"2025-10-28T15:41:48.673682-03:00","created_by":"daemon"}]}
{"id":"celeiro-35","title":"Update API Documentation","description":"Document all financial endpoints: request/response schemas, error codes, auth requirements. Add examples for: OFX import, transaction classification, budget management","acceptance_criteria":"All endpoints documented with request/response examples, error codes documented","status":"open","priority":2,"issue_type":"chore","created_at":"2025-10-28T15:41:48.699922-03:00","updated_at":"2025-10-28T15:41:48.699922-03:00","labels":["api","documentation","p2","phase:8"],"dependencies":[{"issue_id":"celeiro-35","depends_on_id":"celeiro-32","type":"blocks","created_at":"2025-10-28T15:41:48.70203-03:00","created_by":"daemon"}]}
{"id":"celeiro-36","title":"Update Deployment Documentation","description":"Document migration process for 00003-00007. Update database setup instructions. Document rollback procedures for each migration. Add any new environment variables","acceptance_criteria":"Deployment guide updated with migration steps, rollback procedures documented and tested","status":"open","priority":2,"issue_type":"chore","created_at":"2025-10-28T15:41:48.727041-03:00","updated_at":"2025-10-28T15:41:48.727041-03:00","labels":["deployment","documentation","p2","phase:8"],"dependencies":[{"issue_id":"celeiro-36","depends_on_id":"celeiro-9","type":"blocks","created_at":"2025-10-28T15:41:48.728699-03:00","created_by":"daemon"},{"issue_id":"celeiro-36","depends_on_id":"celeiro-10","type":"blocks","created_at":"2025-10-28T15:41:48.72912-03:00","created_by":"daemon"},{"issue_id":"celeiro-36","depends_on_id":"celeiro-11","type":"blocks","created_at":"2025-10-28T15:41:48.729393-03:00","created_by":"daemon"},{"issue_id":"celeiro-36","depends_on_id":"celeiro-12","type":"blocks","created_at":"2025-10-28T15:41:48.730518-03:00","created_by":"daemon"},{"issue_id":"celeiro-36","depends_on_id":"celeiro-13","type":"blocks","created_at":"2025-10-28T15:41:48.730988-03:00","created_by":"daemon"}]}
{"id":"celeiro-37","title":"[PROACTIVE] Add Migration Rollback Testing","description":"PROACTIVE: Create rollback scripts for migrations 00003-00007. Test rollback on clean database. Document rollback procedures and data preservation strategies. Verify CASCADE behavior on rollback","acceptance_criteria":"Rollback scripts created and tested for all 5 financial migrations, rollback procedures documented in deployment docs","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:42:05.239504-03:00","updated_at":"2025-10-28T15:42:05.239504-03:00","labels":["migration","p1","proactive"],"dependencies":[{"issue_id":"celeiro-37","depends_on_id":"celeiro-36","type":"blocks","created_at":"2025-10-28T15:42:05.2416-03:00","created_by":"daemon"}]}
{"id":"celeiro-38","title":"[PROACTIVE] Add Financial Operations Monitoring","description":"PROACTIVE: Add metrics for OFX import (success/failure count, transaction count, parse errors). Add metrics for budget calculations, classification rule execution. Prepare for future Grafana integration","acceptance_criteria":"Key financial operations have OpenTelemetry metrics, can be exported to Grafana","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-28T15:42:05.267219-03:00","updated_at":"2025-10-28T15:42:05.267219-03:00","labels":["monitoring","observability","p2","proactive"],"dependencies":[{"issue_id":"celeiro-38","depends_on_id":"celeiro-23","type":"blocks","created_at":"2025-10-28T15:42:05.270131-03:00","created_by":"daemon"}]}
{"id":"celeiro-39","title":"[PROACTIVE] Performance Benchmark for Bulk Import","description":"PROACTIVE: Create performance tests for bulk importing 1000 transactions, 5000 transactions, 10000 transactions. Measure parse time vs DB insert time. Identify bottlenecks. Document baseline performance","acceptance_criteria":"Benchmark tests created, baseline documented, bottlenecks identified (if any)","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-28T15:42:05.295578-03:00","updated_at":"2025-10-28T15:42:05.295578-03:00","labels":["p2","performance","proactive","testing"],"dependencies":[{"issue_id":"celeiro-39","depends_on_id":"celeiro-23","type":"blocks","created_at":"2025-10-28T15:42:05.299725-03:00","created_by":"daemon"}]}
{"id":"celeiro-4","title":"Migration 00005: Transactions Table","description":"Create transactions table with unique index on (account_id, ofx_fitid), JSONB for raw_ofx_data, partial index for unclassified transactions","design":"See openspec/changes/add-financial-management/design.md - Decision 3 (FITID deduplication)","acceptance_criteria":"Table created, unique constraint prevents duplicates, indexes optimize queries","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:15.012797-03:00","updated_at":"2025-10-28T15:33:15.012797-03:00","labels":["db-migration","p0","phase:1"]}
{"id":"celeiro-40","title":"[PROACTIVE] Security Audit for Financial Data","description":"PROACTIVE: Review financial data access patterns for vulnerabilities. Verify organization isolation (user can't access other org's data). Check for SQL injection risks in dynamic queries. Ensure sensitive data (amounts, FITIDs) not logged. Verify auth middleware on ALL financial endpoints","acceptance_criteria":"Security review complete, no vulnerabilities found, sensitive data not in logs, isolation verified","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-28T15:42:05.32569-03:00","updated_at":"2025-10-28T15:42:05.32569-03:00","labels":["audit","p1","proactive","security"],"dependencies":[{"issue_id":"celeiro-40","depends_on_id":"celeiro-33","type":"blocks","created_at":"2025-10-28T15:42:05.328622-03:00","created_by":"daemon"},{"issue_id":"celeiro-40","depends_on_id":"celeiro-34","type":"blocks","created_at":"2025-10-28T15:42:05.329522-03:00","created_by":"daemon"}]}
{"id":"celeiro-5","title":"Migration 00006: Budgets and Budget Items","description":"Create budgets and budget_items tables, check constraints for month (1-12) and year, indexes on user_id, category_id, month, year","design":"See openspec/changes/add-financial-management/design.md - Decision 5 (Budget types)","acceptance_criteria":"Tables created, constraints enforced, indexes optimize queries","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:15.039753-03:00","updated_at":"2025-10-28T15:33:15.039753-03:00","labels":["db-migration","p0","phase:1"]}
{"id":"celeiro-6","title":"Migration 00007: Classification Rules","description":"Create classification_rules table with indexes on user_id, priority, is_active, check constraints for rule_type","design":"See openspec/changes/add-financial-management/design.md - Decision 4 (Rule priority)","acceptance_criteria":"Table created, indexes optimize rule matching, constraints enforce valid types","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:15.066439-03:00","updated_at":"2025-10-28T15:33:15.066439-03:00","labels":["db-migration","p0","phase:1"]}
{"id":"celeiro-7","title":"Implement OFX Parser Package","description":"Create backend/pkg/ofx/ with Parser interface, format auto-detection, SGML parser for OFX 1.x, XML parser for OFX 2.x, transaction data extraction, error handling","design":"See openspec/changes/add-financial-management/design.md - Decision 8","acceptance_criteria":"Parser handles both formats, auto-detects version, extracts all transaction fields, graceful error handling","status":"open","priority":0,"issue_type":"feature","created_at":"2025-10-28T15:33:15.092342-03:00","updated_at":"2025-10-28T15:33:15.092342-03:00","labels":["p0","parser","phase:2"]}
{"id":"celeiro-8","title":"Write OFX Parser Tests","description":"Unit tests for format detection, OFX 1.x parsing, OFX 2.x parsing, error cases (malformed, missing fields), create testdata/ofx/ with sample files","acceptance_criteria":"\u003e90% coverage, all test cases pass, sample files for checking, credit, malformed","status":"open","priority":0,"issue_type":"chore","created_at":"2025-10-28T15:33:15.11782-03:00","updated_at":"2025-10-28T15:33:15.11782-03:00","labels":["p0","phase:2","testing"]}
{"id":"celeiro-9","title":"Migration 00003: Categories Table","description":"Create categories table with serial ID. Seed 7 system categories: Alimentação, Transporte, Moradia, Saúde, Educação, Lazer, Outros","acceptance_criteria":"Table created with serial PK, system categories seeded, indexes on user_id and is_system","status":"open","priority":0,"issue_type":"task","created_at":"2025-10-28T15:33:21.508624-03:00","updated_at":"2025-10-28T15:33:21.508624-03:00","labels":["db-migration","p0","phase:1"]}
